---
layout: post
title:  "Xdebug with PHPSTORM and Vagrant"
author: Peter Wilkins
date:   2015-10-15
permalink: debug-phpstorm-vagrant
comments: true
---

To make life easy grab a plugin for your browser:

Firefox: [The Easiest Xdebug](https://addons.mozilla.org/en-US/firefox/addon/the-easiest-xdebug)

Chrome: [Xdebug Helper](https://chrome.google.com/webstore/detail/xdebug-helper/eadndfjplgieldjbigjakmdgkmoaaaoc)

Safari: [Xdebug Toggler](https://github.com/benmatselby/xdebug-toggler)

I've only used Chrome's so far.

In PHPSTORM select -> `Run` -> `Edit Configurations` (it is 6th down)

Press the `+` top left and choose `PHP Remote Debug`

You will not have any servers set up so press `...` beside servers dropdown to do that.

Press the `+` top left and set
`name` to `vagrant`, `Host` to `192.168.20.56` and `Port` to `9000`.





If you don't do the next paragraph you 'should' be ok as PHPSTORM will help you with mapping when you start debugging but if it doesn't, then come back and try it.

Tick `Use path mappings`.
The big box that appears is for mapping the remote files on vagrant to the local ones on your system in /site/php56/html.
Select the file to debug (e.g. `index.php`), then press the little pen ![pen](../pen.png) that appears, press the dropdown to get the local url, change /sites/php56/ to /vagrant/  (this is the symlink)

Press `apply` and `ok`.

Choose `Server: vagrant` and set `Ide key(session id)` to  `PHPSTORM`

Press `apply` and `ok`.

In PHPSTORM select -> `Run` -> `Debug Vagrant`
Notice in the Debugger tab it will say 'waiting for incoming connection...'

Open the file to debug in PHPSTORM and put in a break point by clicking to the right of the line number.

In Chrome press the bug in the address bar and set it to green ![bug](../bug.png). Load the page to be debugged e.g. `192.168.20.56/your-site/index.php`

Voila. `F7` to step through the code.
