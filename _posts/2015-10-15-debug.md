---
layout: post
title:  "Xdebug with PHPSTORM and Vagrant"
author: Peter Wilkins
date:   2015-10-15
permalink: debug-phpstorm-vagrant
comments: true
---

Get a plugin for your browser:

For Firefox see The Easiest Xdebug at https://addons.mozilla.org/en-US/firefox/addon/the-easiest-xdebug/
The options include "IDE key for remote debugging" which you can change to match your IDE (e.g. sublime.xdebug).

For Google Chrome see  Xdebug Helper at https://chrome.google.com/webstore/detail/xdebug-helper/eadndfjplgieldjbigjakmdgkmoaaaoc.

For Safari see Xdebug Toggler at  https://github.com/benmatselby/xdebug-toggler

I've only used Chrome's so far.

In PHPSTORM select -> Run -> Edit Configurations (it is 6th down)

Press the + top left and choose PHP Remote Debug

You will not have any servers set up so press the button with 3 dots beside the servers dropdown to set one up.

Press the + top left
name: vagrant, Host: 192.168.20.56 Port: 9000.

Tick Use path mappings.

The big box that appears is for mapping the remote files on vagrant to the local ones in /site/php56/html

Select the file to debug (e.g. index.php), then press the little pen that appears, press the dropdown to get the local url, change /sites/php56/ to /vagrant/  (this is the symlink)

Press apply and ok.

Server: vagrant
Ide key(session id): PHPSTORM

Press apply and ok.

In PHPSTORM select -> Run -> Debug Vagrant
In the Debugger tab it will say 'waiting for incoming connection...'

Open the file to debug and put a break point in by clicking to the right of the line number.

In Chrome press the bug in the address bar and set it to green. Load the page to be debugged e.g. 192.168.20.56/your-site/index.php

Voila. F7 to step through the code.
